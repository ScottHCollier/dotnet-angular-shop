<div class="container">
  <div class="col-lg-6 col-lg-push-3">
    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="register-form"
    >
      <mat-form-field appearance="fill">
        <mat-label>Display Name</mat-label>
        <input type="text" matInput formControlName="displayName" />
      </mat-form-field>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          displayNameControl.touched &&
          displayNameControl.hasError('required')
        "
      >
        Display name is <strong>required</strong>
      </mat-error>

      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input type="email" matInput formControlName="email" />
        <ng-container *ngIf="emailControl.pending">
          <mat-spinner class="loading-spinner" diameter="16"></mat-spinner>
        </ng-container>
      </mat-form-field>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          emailControl.touched &&
          emailControl.hasError('email')
        "
      >
        Please enter a valid email address
      </mat-error>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          emailControl.touched &&
          emailControl.hasError('required')
        "
      >
        Email is <strong>required</strong>
      </mat-error>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          emailControl.dirty &&
          emailControl.hasError('emailAlreadyExists')
        "
      >
        Email already exists
      </mat-error>

      <mat-form-field appearance="fill">
        <mat-label>Password</mat-label>
        <input formControlName="password" matInput type="password" />
      </mat-form-field>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          passwordControl.touched &&
          passwordControl.hasError('required')
        "
      >
        Password is <strong>required</strong>
      </mat-error>

      <mat-form-field appearance="fill">
        <mat-label>Confirm Password</mat-label>
        <input formControlName="confirmPassword" matInput type="password" />
      </mat-form-field>
      <mat-error
        *ngIf="
          !registerForm.valid &&
          confirmPasswordControl.touched &&
          confirmPasswordControl.hasError('required')
        "
      >
        Please confirm password
      </mat-error>

      <ul *ngIf="errors">
        <li *ngFor="let error of errors">
          <mat-error>
            {{ error }}
          </mat-error>
        </li>
      </ul>

      <button mat-flat-button color="primary">Register</button>
    </form>
  </div>
</div>
